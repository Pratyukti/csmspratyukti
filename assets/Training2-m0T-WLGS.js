import{g as B,a as O,s as P,b as u,d as Z,_ as z,e as L,f as U,j as T,w as fe,x as ye,u as ie,c as ce,q as de,k as H,y as ge,z as he,A as be}from"./createSvgIcon-DOtjgECc.js";import{r as d,j as a,P as X,h as ve,D as ee}from"./index-BK3-NH0U.js";import{S as Ce}from"./FormControlLabel-EEnyw3xy.js";import{u as _e,f as Re,L as W,i as oe,b as Ie,P as te,c as xe,I as Se}from"./IconButton-DaRbuSTx.js";import{B as je}from"./Box-BMscNp0X.js";import{T as $e,a as ke,b as Fe,c as se,d as N,e as Ne}from"./TableRow-oYFPfLxG.js";import{T as ae}from"./TextField-B7uaY3nt.js";import{D as Pe,F as Ge,A as Ae}from"./Training4-DrRZATOC.js";function Le(e){return O("MuiFormGroup",e)}B("MuiFormGroup",["root","row","error"]);const Ee=["className","row"],Me=e=>{const{classes:t,row:r,error:s}=e;return U({root:["root",r&&"row",s&&"error"]},Le,t)},ze=P("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>u({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Be=d.forwardRef(function(t,r){const s=Z({props:t,name:"MuiFormGroup"}),{className:c,row:p=!1}=s,v=z(s,Ee),y=_e(),m=Re({props:s,muiFormControl:y,states:["error"]}),b=u({},s,{row:p,error:m.error}),g=Me(b);return a.jsx(ze,u({className:L(g.root,c),ownerState:b,ref:r},v))});function De(e){return O("MuiListItem",e)}const M=B("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),we=B("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Te(e){return O("MuiListItemSecondaryAction",e)}B("MuiListItemSecondaryAction",["root","disableGutters"]);const Oe=["className"],Ue=e=>{const{disableGutters:t,classes:r}=e;return U({root:["root",t&&"disableGutters"]},Te,r)},Ve=P("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})(({ownerState:e})=>u({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),ue=d.forwardRef(function(t,r){const s=Z({props:t,name:"MuiListItemSecondaryAction"}),{className:c}=s,p=z(s,Oe),v=d.useContext(W),y=u({},s,{disableGutters:v.disableGutters}),m=Ue(y);return a.jsx(Ve,u({className:L(m.root,c),ownerState:y,ref:r},p))});ue.muiName="ListItemSecondaryAction";const qe=["className"],We=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],He=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.button&&t.button,r.hasSecondaryAction&&t.secondaryAction]},Ze=e=>{const{alignItems:t,button:r,classes:s,dense:c,disabled:p,disableGutters:v,disablePadding:y,divider:m,hasSecondaryAction:b,selected:g}=e;return U({root:["root",c&&"dense",!v&&"gutters",!y&&"padding",m&&"divider",p&&"disabled",r&&"button",t==="flex-start"&&"alignItemsFlexStart",b&&"secondaryAction",g&&"selected"],container:["container"]},De,s)},Qe=P("div",{name:"MuiListItem",slot:"Root",overridesResolver:He})(({theme:e,ownerState:t})=>u({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&u({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${we.root}`]:{paddingRight:48}},{[`&.${M.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${M.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:T(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${M.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:T(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${M.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${M.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:T(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:T(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Xe=P("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Ye=d.forwardRef(function(t,r){const s=Z({props:t,name:"MuiListItem"}),{alignItems:c="center",autoFocus:p=!1,button:v=!1,children:y,className:m,component:b,components:g={},componentsProps:_={},ContainerComponent:j="li",ContainerProps:{className:F}={},dense:$=!1,disabled:k=!1,disableGutters:R=!1,disablePadding:C=!1,divider:f=!1,focusVisibleClassName:D,secondaryAction:o,selected:n=!1,slotProps:l={},slots:h={}}=s,i=z(s.ContainerProps,qe),I=z(s,We),x=d.useContext(W),S=d.useMemo(()=>({dense:$||x.dense||!1,alignItems:c,disableGutters:R}),[c,x.dense,$,R]),Q=d.useRef(null);fe(()=>{p&&Q.current&&Q.current.focus()},[p]);const E=d.Children.toArray(y),Y=E.length&&ye(E[E.length-1],["ListItemSecondaryAction"]),V=u({},s,{alignItems:c,autoFocus:p,button:v,dense:S.dense,disabled:k,disableGutters:R,disablePadding:C,divider:f,hasSecondaryAction:Y,selected:n}),J=Ze(V),K=ie(Q,r),q=h.root||g.Root||Qe,w=l.root||_.root||{},G=u({className:L(J.root,w.className,m),disabled:k},I);let A=b||"li";return v&&(G.component=b||"div",G.focusVisibleClassName=L(M.focusVisible,D),A=Ie),Y?(A=!G.component&&!b?"div":A,j==="li"&&(A==="li"?A="div":G.component==="li"&&(G.component="div")),a.jsx(W.Provider,{value:S,children:a.jsxs(Xe,u({as:j,className:L(J.container,F),ref:K,ownerState:V},i,{children:[a.jsx(q,u({},w,!oe(q)&&{as:A,ownerState:u({},V,w.ownerState)},G,{children:E})),E.pop()]}))})):a.jsx(W.Provider,{value:S,children:a.jsxs(q,u({},w,{as:A,ref:K},!oe(q)&&{ownerState:u({},V,w.ownerState)},G,{children:[E,o&&a.jsx(ue,{children:o})]}))})}),Je=ce(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Ke=ce(a.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),eo=P("span",{shouldForwardProp:de})({position:"relative",display:"flex"}),oo=P(Je)({transform:"scale(1)"}),to=P(Ke)(({theme:e,ownerState:t})=>u({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function pe(e){const{checked:t=!1,classes:r={},fontSize:s}=e,c=u({},e,{checked:t});return a.jsxs(eo,{className:r.root,ownerState:c,children:[a.jsx(oo,{fontSize:s,className:r.background,ownerState:c}),a.jsx(to,{fontSize:s,className:r.dot,ownerState:c})]})}const me=d.createContext(void 0);function so(){return d.useContext(me)}function ao(e){return O("MuiRadio",e)}const re=B("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ro=["checked","checkedIcon","color","icon","name","onChange","size","className"],no=e=>{const{classes:t,color:r,size:s}=e,c={root:["root",`color${H(r)}`,s!=="medium"&&`size${H(s)}`]};return u({},t,U(c,ao,t))},lo=P(Ce,{shouldForwardProp:e=>de(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size!=="medium"&&t[`size${H(r.size)}`],t[`color${H(r.color)}`]]}})(({theme:e,ownerState:t})=>u({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:T(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${re.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${re.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function io(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const ne=a.jsx(pe,{checked:!0}),le=a.jsx(pe,{}),Ro=d.forwardRef(function(t,r){var s,c;const p=Z({props:t,name:"MuiRadio"}),{checked:v,checkedIcon:y=ne,color:m="primary",icon:b=le,name:g,onChange:_,size:j="medium",className:F}=p,$=z(p,ro),k=u({},p,{color:m,size:j}),R=no(k),C=so();let f=v;const D=ge(_,C&&C.onChange);let o=g;return C&&(typeof f>"u"&&(f=io(C.value,p.value)),typeof o>"u"&&(o=C.name)),a.jsx(lo,u({type:"radio",icon:d.cloneElement(b,{fontSize:(s=le.props.fontSize)!=null?s:j}),checkedIcon:d.cloneElement(y,{fontSize:(c=ne.props.fontSize)!=null?c:j}),ownerState:k,classes:R,name:o,checked:f,onChange:D,ref:r,className:L(R.root,F)},$))});function co(e){return O("MuiRadioGroup",e)}B("MuiRadioGroup",["root","row","error"]);const uo=["actions","children","className","defaultValue","name","onChange","value"],po=e=>{const{classes:t,row:r,error:s}=e;return U({root:["root",r&&"row",s&&"error"]},co,t)},Io=d.forwardRef(function(t,r){const{actions:s,children:c,className:p,defaultValue:v,name:y,onChange:m,value:b}=t,g=z(t,uo),_=d.useRef(null),j=po(t),[F,$]=he({controlled:b,default:v,name:"RadioGroup"});d.useImperativeHandle(s,()=>({focus:()=>{let f=_.current.querySelector("input:not(:disabled):checked");f||(f=_.current.querySelector("input:not(:disabled)")),f&&f.focus()}}),[]);const k=ie(r,_),R=be(y),C=d.useMemo(()=>({name:R,onChange(f){$(f.target.value),m&&m(f,f.target.value)},value:F}),[R,m,$,F]);return a.jsx(me.Provider,{value:C,children:a.jsx(Be,u({role:"radiogroup",ref:k,className:L(j.root,p)},g,{children:c}))})}),mo=({onEmployeesChange:e,initialData:t})=>{const r=ve(o=>o.userInfo),[s,c]=d.useState(t||[]),[p,v]=d.useState(r.whitelevel_id),[y,m]=d.useState({}),[b,g]=d.useState({}),_=d.useRef(!1);d.useEffect(()=>{_.current||(console.log("initialData in Training component:",t),_.current=!0)},[t]),d.useEffect(()=>{if(t&&t.length>0&&s.length===0){console.log("initialData in useEffect 2:",t);const o=t.map(n=>({...n}));c(o),console.log("Updated rows in training2:",o)}},[t]);const j=async(o,n)=>{try{return(await ee.post("/employee/name/",{employee_id:o,whitelevel_id:n})).data.employee_name||""}catch(l){return console.error("Error fetching employee name:",l),""}},F=async o=>{try{return(await ee.get(`/employee/search/?nameQuery=${o}`)).data||[]}catch(n){return console.error("Error fetching employee suggestions:",n),[]}};d.useEffect(()=>{e(s.map(o=>({employee:o.employee_id,whitelevel_id:p,employee_id:o.employee_id==="0"?"":o.employee_id,employee_name:o.employee_id==="0"?o.name:o.employee_name,trainer_id:o.employee_id,trainer_name:o.employee_id==="0"?o.name:o.employee_name,trainee_id:o.employee_id==="0"?"":o.employee_id,trainee_name:o.employee_id==="0"?"":o.employee_name})))},[s,e]);const $=o=>/^[a-zA-Z\s.]*$/.test(o),k=()=>{if(s.length===0||s[s.length-1].employee_id&&(s[s.length-1].employee_name||s[s.length-1].name))c([...s,{employee_id:"",whitelevel_id:p,employee_name:"",name:"",error:"",manual:!1,employee_id_error:!1,employee_name_error:!1,disableNameField:!1,invalidCharacterError:!1}]);else{const n=[...s];s[s.length-1].employee_id||(n[s.length-1].employee_id_error=!0),s[s.length-1].employee_name||s[s.length-1].name||(n[s.length-1].employee_name_error=!0),c(n)}},R=o=>{const n=s.filter((l,h)=>h!==o);c(n)},C=async(o,n)=>{const{name:l,value:h}=n.target,i=[...s];if(l==="employee_name"||l==="name")if($(h))i[o].invalidCharacterError=!1;else{i[o].invalidCharacterError=!0,c(i);return}if(i[o][l]=h,l==="employee_id")if(i[o].employee_id_error=!1,i[o].error="",h==="0")i[o].employee_name="",i[o].manual=!0,i[o].disableNameField=!1;else{const I=i.some((x,S)=>x.employee_id===h&&S!==o);if(i[o].error=I?"duplicate":"",I)i[o].disableNameField=!0;else{const x=await j(h,p);x?(i[o].employee_name=x,i[o].manual=!1,i[o].disableNameField=!0):(i[o].error="invalid",i[o].employee_name="",i[o].disableNameField=!0)}}else if(l==="employee_name")if(h.length>0)if(i.some((x,S)=>x.employee_name===h&&S!==o))i[o].error="duplicate",i[o].disableIDField=!0;else{const x=await F(h);m(S=>({...S,[o]:x})),g(S=>({...S,[o]:!0})),i[o].disableIDField=!1}else m(I=>({...I,[o]:[]})),g(I=>({...I,[o]:!1}));else i[o].employee_name_error=!1,l==="name"&&s[o].employee_id==="0"&&(i[o].employee_name_error=!1,i[o].error="");c(i)},f=(o,n)=>{const l=[...s];l.some((i,I)=>i.employee_name===n.employee_name&&I!==o)?(l[o].error="duplicate",l[o].employee_id_error=!0,l[o].employee_name=n.employee_name,l[o].employee_id="",l[o].disableIDField=!0):(l[o].employee_name=n.employee_name,l[o].employee_id=n.employee_id,l[o].manual=!1,l[o].error="",l[o].employee_id_error=!1,l[o].disableIDField=!1),m(i=>({...i,[o]:[]})),g(i=>({...i,[o]:!1})),c(l)},D=o=>{setTimeout(()=>{g(n=>({...n,[o]:!1}))},200)};return a.jsxs(je,{sx:{position:"relative"},children:[a.jsx($e,{component:te,sx:{border:"1px solid lightgrey",borderRadius:"8px",boxShadow:"none"},children:a.jsxs(ke,{children:[a.jsx(Fe,{children:a.jsxs(se,{children:[a.jsx(N,{children:"Sl. No"}),a.jsx(N,{sx:{pl:12},children:"Employee ID"}),a.jsx(N,{sx:{pl:12},children:"Employee Name"}),a.jsx(N,{sx:{pl:2},children:"Actions"})]})}),a.jsx(Ne,{children:s.map((o,n)=>a.jsxs(se,{children:[a.jsx(N,{children:n+1}),a.jsx(N,{children:a.jsx(ae,{variant:"outlined",size:"small",name:"employee_id",value:o.employee_id,onChange:l=>C(n,l),fullWidth:!0,required:!0,error:!!o.error||o.employee_id_error,helperText:o.error==="duplicate"?"Duplicate employee ID":o.error==="invalid"?"Employee does not exist":o.employee_id_error?"Employee ID is required":"",disabled:o.disableIDField,onFocus:()=>g(l=>({...l,[n]:!1}))})}),a.jsxs(N,{children:[a.jsx(ae,{variant:"outlined",size:"small",name:o.manual?"name":"employee_name",value:o.manual?o.name:o.employee_name,onChange:l=>C(n,l),onBlur:()=>D(n),fullWidth:!0,required:!0,disabled:o.disableNameField,error:o.employee_name_error||o.invalidCharacterError,helperText:o.invalidCharacterError?"Invalid characters in employee name":o.employee_name_error?"Employee name is required":""}),b[n]&&y[n]&&a.jsx(te,{sx:{position:"absolute",zIndex:1,maxWidth:"300px"},children:a.jsx(xe,{sx:{maxHeight:200,overflow:"auto"},children:y[n].map((l,h)=>a.jsx(Ye,{button:!0,onClick:()=>f(n,l),children:`${l.employee_name}`},h))})})]}),a.jsx(N,{children:a.jsx(Se,{color:"primary",onClick:()=>R(n),children:a.jsx(Pe,{})})})]},n))})]})}),a.jsx(Ge,{color:"primary",size:"small",onClick:k,sx:{position:"absolute",bottom:-18,left:"49%",transform:"translateX(-50%)",boxShadow:"none",zIndex:1},children:a.jsx(Ae,{})})]})};mo.prototype={onEmployeesChange:X.func.isRequired,initialData:X.arrayOf(X.object).isRequired};export{Io as R,mo as T,Ro as a};
