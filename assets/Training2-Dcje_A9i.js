import{g as B,a as O,s as P,b as u,d as H,_ as E,e as L,f as T,j as w,w as me,x as fe,u as le,c as ie,q as ce,k as W,y as ye,z as ge,A as he}from"./createSvgIcon-CO8B0Zx3.js";import{r as d,j as r,h as be,D as K}from"./index-FeOCyUOx.js";import{S as ve}from"./FormControlLabel-5Nr4NLPA.js";import{u as Ce,f as _e,L as q,i as ee,b as Ie,P as oe,c as Re,I as xe}from"./IconButton-CGRnKMwE.js";import{B as Se}from"./Box-B9uti8Zu.js";import{T as je,a as Ne,b as $e,c as te,d as F,e as ke}from"./TableRow-BErxlAm5.js";import{T as se}from"./TextField-DJcsis2p.js";import{D as Fe,F as Pe,A as Ae}from"./Training4-Cn08DDva.js";function Ge(e){return O("MuiFormGroup",e)}B("MuiFormGroup",["root","row","error"]);const Le=["className","row"],Me=e=>{const{classes:t,row:n,error:s}=e;return T({root:["root",n&&"row",s&&"error"]},Ge,t)},ze=P("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>u({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Ee=d.forwardRef(function(t,n){const s=H({props:t,name:"MuiFormGroup"}),{className:c,row:p=!1}=s,v=E(s,Le),y=Ce(),m=_e({props:s,muiFormControl:y,states:["error"]}),b=u({},s,{row:p,error:m.error}),g=Me(b);return r.jsx(ze,u({className:L(g.root,c),ownerState:b,ref:n},v))});function Be(e){return O("MuiListItem",e)}const z=B("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),De=B("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function we(e){return O("MuiListItemSecondaryAction",e)}B("MuiListItemSecondaryAction",["root","disableGutters"]);const Oe=["className"],Te=e=>{const{disableGutters:t,classes:n}=e;return T({root:["root",t&&"disableGutters"]},we,n)},Ue=P("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>u({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),de=d.forwardRef(function(t,n){const s=H({props:t,name:"MuiListItemSecondaryAction"}),{className:c}=s,p=E(s,Oe),v=d.useContext(q),y=u({},s,{disableGutters:v.disableGutters}),m=Te(y);return r.jsx(Ue,u({className:L(m.root,c),ownerState:y,ref:n},p))});de.muiName="ListItemSecondaryAction";const Ve=["className"],qe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],We=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},He=e=>{const{alignItems:t,button:n,classes:s,dense:c,disabled:p,disableGutters:v,disablePadding:y,divider:m,hasSecondaryAction:b,selected:g}=e;return T({root:["root",c&&"dense",!v&&"gutters",!y&&"padding",m&&"divider",p&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",b&&"secondaryAction",g&&"selected"],container:["container"]},Be,s)},Je=P("div",{name:"MuiListItem",slot:"Root",overridesResolver:We})(({theme:e,ownerState:t})=>u({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&u({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${De.root}`]:{paddingRight:48}},{[`&.${z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Ze=P("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Qe=d.forwardRef(function(t,n){const s=H({props:t,name:"MuiListItem"}),{alignItems:c="center",autoFocus:p=!1,button:v=!1,children:y,className:m,component:b,components:g={},componentsProps:R={},ContainerComponent:x="li",ContainerProps:{className:k}={},dense:N=!1,disabled:$=!1,disableGutters:C=!1,disablePadding:_=!1,divider:f=!1,focusVisibleClassName:o,secondaryAction:a,selected:l=!1,slotProps:h={},slots:i={}}=s,I=E(s.ContainerProps,Ve),S=E(s,qe),j=d.useContext(q),J=d.useMemo(()=>({dense:N||j.dense||!1,alignItems:c,disableGutters:C}),[c,j.dense,N,C]),Z=d.useRef(null);me(()=>{p&&Z.current&&Z.current.focus()},[p]);const M=d.Children.toArray(y),Q=M.length&&fe(M[M.length-1],["ListItemSecondaryAction"]),U=u({},s,{alignItems:c,autoFocus:p,button:v,dense:J.dense,disabled:$,disableGutters:C,disablePadding:_,divider:f,hasSecondaryAction:Q,selected:l}),X=He(U),Y=le(Z,n),V=i.root||g.Root||Je,D=h.root||R.root||{},A=u({className:L(X.root,D.className,m),disabled:$},S);let G=b||"li";return v&&(A.component=b||"div",A.focusVisibleClassName=L(z.focusVisible,o),G=Ie),Q?(G=!A.component&&!b?"div":G,x==="li"&&(G==="li"?G="div":A.component==="li"&&(A.component="div")),r.jsx(q.Provider,{value:J,children:r.jsxs(Ze,u({as:x,className:L(X.container,k),ref:Y,ownerState:U},I,{children:[r.jsx(V,u({},D,!ee(V)&&{as:G,ownerState:u({},U,D.ownerState)},A,{children:M})),M.pop()]}))})):r.jsx(q.Provider,{value:J,children:r.jsxs(V,u({},D,{as:G,ref:Y},!ee(V)&&{ownerState:u({},U,D.ownerState)},A,{children:[M,a&&r.jsx(de,{children:a})]}))})}),Xe=ie(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Ye=ie(r.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Ke=P("span",{shouldForwardProp:ce})({position:"relative",display:"flex"}),eo=P(Xe)({transform:"scale(1)"}),oo=P(Ye)(({theme:e,ownerState:t})=>u({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function ue(e){const{checked:t=!1,classes:n={},fontSize:s}=e,c=u({},e,{checked:t});return r.jsxs(Ke,{className:n.root,ownerState:c,children:[r.jsx(eo,{fontSize:s,className:n.background,ownerState:c}),r.jsx(oo,{fontSize:s,className:n.dot,ownerState:c})]})}const pe=d.createContext(void 0);function to(){return d.useContext(pe)}function so(e){return O("MuiRadio",e)}const ae=B("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ao=["checked","checkedIcon","color","icon","name","onChange","size","className"],ro=e=>{const{classes:t,color:n,size:s}=e,c={root:["root",`color${W(n)}`,s!=="medium"&&`size${W(s)}`]};return u({},t,T(c,so,t))},no=P(ve,{shouldForwardProp:e=>ce(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size!=="medium"&&t[`size${W(n.size)}`],t[`color${W(n.color)}`]]}})(({theme:e,ownerState:t})=>u({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:w(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${ae.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${ae.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function lo(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const re=r.jsx(ue,{checked:!0}),ne=r.jsx(ue,{}),Co=d.forwardRef(function(t,n){var s,c;const p=H({props:t,name:"MuiRadio"}),{checked:v,checkedIcon:y=re,color:m="primary",icon:b=ne,name:g,onChange:R,size:x="medium",className:k}=p,N=E(p,ao),$=u({},p,{color:m,size:x}),C=ro($),_=to();let f=v;const o=ye(R,_&&_.onChange);let a=g;return _&&(typeof f>"u"&&(f=lo(_.value,p.value)),typeof a>"u"&&(a=_.name)),r.jsx(no,u({type:"radio",icon:d.cloneElement(b,{fontSize:(s=ne.props.fontSize)!=null?s:x}),checkedIcon:d.cloneElement(y,{fontSize:(c=re.props.fontSize)!=null?c:x}),ownerState:$,classes:C,name:a,checked:f,onChange:o,ref:n,className:L(C.root,k)},N))});function io(e){return O("MuiRadioGroup",e)}B("MuiRadioGroup",["root","row","error"]);const co=["actions","children","className","defaultValue","name","onChange","value"],uo=e=>{const{classes:t,row:n,error:s}=e;return T({root:["root",n&&"row",s&&"error"]},io,t)},_o=d.forwardRef(function(t,n){const{actions:s,children:c,className:p,defaultValue:v,name:y,onChange:m,value:b}=t,g=E(t,co),R=d.useRef(null),x=uo(t),[k,N]=ge({controlled:b,default:v,name:"RadioGroup"});d.useImperativeHandle(s,()=>({focus:()=>{let f=R.current.querySelector("input:not(:disabled):checked");f||(f=R.current.querySelector("input:not(:disabled)")),f&&f.focus()}}),[]);const $=le(n,R),C=he(y),_=d.useMemo(()=>({name:C,onChange(f){N(f.target.value),m&&m(f,f.target.value)},value:k}),[C,m,N,k]);return r.jsx(pe.Provider,{value:_,children:r.jsx(Ee,u({role:"radiogroup",ref:$,className:L(x.root,p)},g,{children:c}))})}),Io=({onEmployeesChange:e,initialData:t})=>{const n=be(o=>o.userInfo),[s,c]=d.useState(t||[]),[p,v]=d.useState(n.whitelevel_id),[y,m]=d.useState({}),[b,g]=d.useState({});d.useEffect(()=>{if(Array.isArray(t)&&t.length>0&&s.length===0){console.log("initialData :",t);const o=t.map(a=>({...a}));c(a=>JSON.stringify(a)===JSON.stringify(o)?a:o)}},[t]);const R=async(o,a)=>{try{return(await K.post("/employee/name/",{employee_id:o,whitelevel_id:a})).data.employee_name||""}catch(l){return console.error("Error fetching employee name:",l),""}},x=async o=>{try{return(await K.get(`/employee/search/?nameQuery=${o}`)).data||[]}catch(a){return console.error("Error fetching employee suggestions:",a),[]}};d.useEffect(()=>{e(s.map(o=>({employee:o.employee_id,whitelevel_id:p,employee_id:o.employee_id==="0"?"":o.employee_id,employee_name:o.employee_id==="0"?o.name:o.employee_name,trainer_id:o.employee_id,trainer_name:o.employee_id==="0"?o.name:o.employee_name,trainee_id:o.employee_id==="0"?"":o.employee_id,trainee_name:o.employee_id==="0"?"":o.employee_name})))},[s,e]);const k=o=>/^[a-zA-Z\s.]*$/.test(o),N=()=>{if(s.length===0||s[s.length-1].employee_id&&(s[s.length-1].employee_name||s[s.length-1].name))c([...s,{employee_id:"",whitelevel_id:p,employee_name:"",name:"",error:"",manual:!1,employee_id_error:!1,employee_name_error:!1,disableNameField:!1,invalidCharacterError:!1}]);else{const a=[...s];s[s.length-1].employee_id||(a[s.length-1].employee_id_error=!0),s[s.length-1].employee_name||s[s.length-1].name||(a[s.length-1].employee_name_error=!0),c(a)}},$=o=>{const a=s.filter((l,h)=>h!==o);c(a)},C=async(o,a)=>{const{name:l,value:h}=a.target,i=[...s];if(l==="employee_name"||l==="name")if(k(h))i[o].invalidCharacterError=!1;else{i[o].invalidCharacterError=!0,c(i);return}if(i[o][l]=h,l==="employee_id")if(i[o].employee_id_error=!1,i[o].error="",h==="0")i[o].employee_name="",i[o].manual=!0,i[o].disableNameField=!1;else{const I=i.some((S,j)=>S.employee_id===h&&j!==o);if(i[o].error=I?"duplicate":"",I)i[o].disableNameField=!0;else{const S=await R(h,p);S?(i[o].employee_name=S,i[o].manual=!1,i[o].disableNameField=!0):(i[o].error="invalid",i[o].employee_name="",i[o].disableNameField=!0)}}else if(l==="employee_name")if(h.length>0)if(i.some((S,j)=>S.employee_name===h&&j!==o))i[o].error="duplicate",i[o].disableIDField=!0;else{const S=await x(h);m(j=>({...j,[o]:S})),g(j=>({...j,[o]:!0})),i[o].disableIDField=!1}else m(I=>({...I,[o]:[]})),g(I=>({...I,[o]:!1}));else i[o].employee_name_error=!1,l==="name"&&s[o].employee_id==="0"&&(i[o].employee_name_error=!1,i[o].error="");c(i)},_=(o,a)=>{const l=[...s];l.some((i,I)=>i.employee_name===a.employee_name&&I!==o)?(l[o].error="duplicate",l[o].employee_id_error=!0,l[o].employee_name=a.employee_name,l[o].employee_id="",l[o].disableIDField=!0):(l[o].employee_name=a.employee_name,l[o].employee_id=a.employee_id,l[o].manual=!1,l[o].error="",l[o].employee_id_error=!1,l[o].disableIDField=!1),m(i=>({...i,[o]:[]})),g(i=>({...i,[o]:!1})),c(l)},f=o=>{setTimeout(()=>{g(a=>({...a,[o]:!1}))},200)};return r.jsxs(Se,{sx:{position:"relative"},children:[r.jsx(je,{component:oe,sx:{border:"1px solid lightgrey",borderRadius:"8px",boxShadow:"none"},children:r.jsxs(Ne,{children:[r.jsx($e,{children:r.jsxs(te,{children:[r.jsx(F,{children:"Sl. No"}),r.jsx(F,{sx:{pl:12},children:"Employee ID"}),r.jsx(F,{sx:{pl:12},children:"Employee Name"}),r.jsx(F,{sx:{pl:2},children:"Actions"})]})}),r.jsx(ke,{children:s.map((o,a)=>r.jsxs(te,{children:[r.jsx(F,{children:a+1}),r.jsx(F,{children:r.jsx(se,{variant:"outlined",size:"small",name:"employee_id",value:o.employee_id,onChange:l=>C(a,l),fullWidth:!0,required:!0,error:!!o.error||o.employee_id_error,helperText:o.error==="duplicate"?"Duplicate employee ID":o.error==="invalid"?"Employee does not exist":o.employee_id_error?"Employee ID is required":"",disabled:o.disableIDField,onFocus:()=>g(l=>({...l,[a]:!1}))})}),r.jsxs(F,{children:[r.jsx(se,{variant:"outlined",size:"small",name:o.manual?"name":"employee_name",value:o.manual?o.name:o.employee_name,onChange:l=>C(a,l),onBlur:()=>f(a),fullWidth:!0,required:!0,disabled:o.disableNameField,error:o.employee_name_error||o.invalidCharacterError,helperText:o.invalidCharacterError?"Invalid characters in employee name":o.employee_name_error?"Employee name is required":""}),b[a]&&y[a]&&r.jsx(oe,{sx:{position:"absolute",zIndex:1,maxWidth:"300px"},children:r.jsx(Re,{sx:{maxHeight:200,overflow:"auto"},children:y[a].map((l,h)=>r.jsx(Qe,{button:!0,onClick:()=>_(a,l),children:`${l.employee_name}`},h))})})]}),r.jsx(F,{children:r.jsx(xe,{color:"primary",onClick:()=>$(a),children:r.jsx(Fe,{})})})]},a))})]})}),r.jsx(Pe,{color:"primary",size:"small",onClick:N,sx:{position:"absolute",bottom:-18,left:"49%",transform:"translateX(-50%)",boxShadow:"none",zIndex:1},children:r.jsx(Ae,{})})]})};export{_o as R,Io as T,Co as a};
