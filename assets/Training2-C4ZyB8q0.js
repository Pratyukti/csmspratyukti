import{g as O,a as T,s as G,b as p,d as Z,_ as B,e as L,f as V,j as U,w as fe,x as ye,u as ie,c as ce,q as de,k as J,y as ge,z as he,A as be}from"./createSvgIcon-jufI53Kk.js";import{r as d,j as r,P as Q,h as ve,D as ee}from"./index-Ly0M8P4q.js";import{S as Ce}from"./FormControlLabel-CVB9tTYm.js";import{u as _e,f as Re,L as H,i as oe,b as Ie,P as te,c as xe,I as Se}from"./IconButton-bLyPz66B.js";import{B as je}from"./Box-DhnOwVFN.js";import{T as Ne,a as $e,b as ke,c as se,d as P,e as Fe}from"./TableRow-OeIAyzV3.js";import{T as ae}from"./TextField-C0mGIOFZ.js";import{D as Pe,F as Ge,A as Ae}from"./Training4-B4CrVYx4.js";function Ee(e){return T("MuiFormGroup",e)}O("MuiFormGroup",["root","row","error"]);const Le=["className","row"],Me=e=>{const{classes:t,row:a,error:i}=e;return V({root:["root",a&&"row",i&&"error"]},Ee,t)},ze=G("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.row&&t.row]}})(({ownerState:e})=>p({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Be=d.forwardRef(function(t,a){const i=Z({props:t,name:"MuiFormGroup"}),{className:s,row:u=!1}=i,f=B(i,Le),v=_e(),y=Re({props:i,muiFormControl:v,states:["error"]}),g=p({},i,{row:u,error:y.error}),R=Me(g);return r.jsx(ze,p({className:L(R.root,s),ownerState:g,ref:a},f))});function Oe(e){return T("MuiListItem",e)}const z=O("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),we=O("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function De(e){return T("MuiListItemSecondaryAction",e)}O("MuiListItemSecondaryAction",["root","disableGutters"]);const Ue=["className"],Te=e=>{const{disableGutters:t,classes:a}=e;return V({root:["root",t&&"disableGutters"]},De,a)},Ve=G("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.disableGutters&&t.disableGutters]}})(({ownerState:e})=>p({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),ue=d.forwardRef(function(t,a){const i=Z({props:t,name:"MuiListItemSecondaryAction"}),{className:s}=i,u=B(i,Ue),f=d.useContext(H),v=p({},i,{disableGutters:f.disableGutters}),y=Te(v);return r.jsx(Ve,p({className:L(y.root,s),ownerState:v,ref:a},u))});ue.muiName="ListItemSecondaryAction";const qe=["className"],We=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],He=(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.alignItems==="flex-start"&&t.alignItemsFlexStart,a.divider&&t.divider,!a.disableGutters&&t.gutters,!a.disablePadding&&t.padding,a.button&&t.button,a.hasSecondaryAction&&t.secondaryAction]},Je=e=>{const{alignItems:t,button:a,classes:i,dense:s,disabled:u,disableGutters:f,disablePadding:v,divider:y,hasSecondaryAction:g,selected:R}=e;return V({root:["root",s&&"dense",!f&&"gutters",!v&&"padding",y&&"divider",u&&"disabled",a&&"button",t==="flex-start"&&"alignItemsFlexStart",g&&"secondaryAction",R&&"selected"],container:["container"]},Oe,i)},Ze=G("div",{name:"MuiListItem",slot:"Root",overridesResolver:He})(({theme:e,ownerState:t})=>p({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&p({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${we.root}`]:{paddingRight:48}},{[`&.${z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:U(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:U(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:U(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:U(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Qe=G("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Xe=d.forwardRef(function(t,a){const i=Z({props:t,name:"MuiListItem"}),{alignItems:s="center",autoFocus:u=!1,button:f=!1,children:v,className:y,component:g,components:R={},componentsProps:b={},ContainerComponent:I="li",ContainerProps:{className:k}={},dense:N=!1,disabled:$=!1,disableGutters:x=!1,disablePadding:S=!1,divider:m=!1,focusVisibleClassName:w,secondaryAction:F,selected:o=!1,slotProps:c={},slots:n={}}=i,h=B(i.ContainerProps,qe),l=B(i,We),C=d.useContext(H),_=d.useMemo(()=>({dense:N||C.dense||!1,alignItems:s,disableGutters:x}),[s,C.dense,N,x]),j=d.useRef(null);fe(()=>{u&&j.current&&j.current.focus()},[u]);const M=d.Children.toArray(v),X=M.length&&ye(M[M.length-1],["ListItemSecondaryAction"]),q=p({},i,{alignItems:s,autoFocus:u,button:f,dense:_.dense,disabled:$,disableGutters:x,disablePadding:S,divider:m,hasSecondaryAction:X,selected:o}),Y=Je(q),K=ie(j,a),W=n.root||R.Root||Ze,D=c.root||b.root||{},A=p({className:L(Y.root,D.className,y),disabled:$},l);let E=g||"li";return f&&(A.component=g||"div",A.focusVisibleClassName=L(z.focusVisible,w),E=Ie),X?(E=!A.component&&!g?"div":E,I==="li"&&(E==="li"?E="div":A.component==="li"&&(A.component="div")),r.jsx(H.Provider,{value:_,children:r.jsxs(Qe,p({as:I,className:L(Y.container,k),ref:K,ownerState:q},h,{children:[r.jsx(W,p({},D,!oe(W)&&{as:E,ownerState:p({},q,D.ownerState)},A,{children:M})),M.pop()]}))})):r.jsx(H.Provider,{value:_,children:r.jsxs(W,p({},D,{as:E,ref:K},!oe(W)&&{ownerState:p({},q,D.ownerState)},A,{children:[M,F&&r.jsx(ue,{children:F})]}))})}),Ye=ce(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Ke=ce(r.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),eo=G("span",{shouldForwardProp:de})({position:"relative",display:"flex"}),oo=G(Ye)({transform:"scale(1)"}),to=G(Ke)(({theme:e,ownerState:t})=>p({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function pe(e){const{checked:t=!1,classes:a={},fontSize:i}=e,s=p({},e,{checked:t});return r.jsxs(eo,{className:a.root,ownerState:s,children:[r.jsx(oo,{fontSize:i,className:a.background,ownerState:s}),r.jsx(to,{fontSize:i,className:a.dot,ownerState:s})]})}const me=d.createContext(void 0);function so(){return d.useContext(me)}function ao(e){return T("MuiRadio",e)}const re=O("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ro=["checked","checkedIcon","color","icon","name","onChange","size","className"],no=e=>{const{classes:t,color:a,size:i}=e,s={root:["root",`color${J(a)}`,i!=="medium"&&`size${J(i)}`]};return p({},t,V(s,ao,t))},lo=G(Ce,{shouldForwardProp:e=>de(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.size!=="medium"&&t[`size${J(a.size)}`],t[`color${J(a.color)}`]]}})(({theme:e,ownerState:t})=>p({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:U(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${re.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${re.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function io(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const ne=r.jsx(pe,{checked:!0}),le=r.jsx(pe,{}),Ro=d.forwardRef(function(t,a){var i,s;const u=Z({props:t,name:"MuiRadio"}),{checked:f,checkedIcon:v=ne,color:y="primary",icon:g=le,name:R,onChange:b,size:I="medium",className:k}=u,N=B(u,ro),$=p({},u,{color:y,size:I}),x=no($),S=so();let m=f;const w=ge(b,S&&S.onChange);let F=R;return S&&(typeof m>"u"&&(m=io(S.value,u.value)),typeof F>"u"&&(F=S.name)),r.jsx(lo,p({type:"radio",icon:d.cloneElement(g,{fontSize:(i=le.props.fontSize)!=null?i:I}),checkedIcon:d.cloneElement(v,{fontSize:(s=ne.props.fontSize)!=null?s:I}),ownerState:$,classes:x,name:F,checked:m,onChange:w,ref:a,className:L(x.root,k)},N))});function co(e){return T("MuiRadioGroup",e)}O("MuiRadioGroup",["root","row","error"]);const uo=["actions","children","className","defaultValue","name","onChange","value"],po=e=>{const{classes:t,row:a,error:i}=e;return V({root:["root",a&&"row",i&&"error"]},co,t)},Io=d.forwardRef(function(t,a){const{actions:i,children:s,className:u,defaultValue:f,name:v,onChange:y,value:g}=t,R=B(t,uo),b=d.useRef(null),I=po(t),[k,N]=he({controlled:g,default:f,name:"RadioGroup"});d.useImperativeHandle(i,()=>({focus:()=>{let m=b.current.querySelector("input:not(:disabled):checked");m||(m=b.current.querySelector("input:not(:disabled)")),m&&m.focus()}}),[]);const $=ie(a,b),x=be(v),S=d.useMemo(()=>({name:x,onChange(m){N(m.target.value),y&&y(m,m.target.value)},value:k}),[x,y,N,k]);return r.jsx(me.Provider,{value:S,children:r.jsx(Be,p({role:"radiogroup",ref:$,className:L(I.root,u)},R,{children:s}))})}),mo=({onEmployeesChange:e,initialData:t,initialTrainerData:a})=>{const i=ve(o=>o.userInfo),[s,u]=d.useState(t||a||[]),[f,v]=d.useState(i.whitelevel_id),[y,g]=d.useState({}),[R,b]=d.useState({}),I=d.useRef(!1);d.useEffect(()=>{I.current||(console.log("initialData in Training component:",t),I.current=!0)},[t]),d.useEffect(()=>{t&&t.length>0&&JSON.stringify(s)!==JSON.stringify(t)&&(console.log("Updated initialData in useEffect:",t),u(t.map(o=>({...o}))))},[t,s]),d.useEffect(()=>{a&&a.length>0&&(console.log("Updated initialData in useEffect:",a),u(a.map(o=>({...o}))))},[a]);const k=async(o,c)=>{try{return(await ee.post("/employee/name/",{employee_id:o,whitelevel_id:c})).data.employee_name||""}catch(n){return console.error("Error fetching employee name:",n),""}},N=async o=>{try{return(await ee.get(`/employee/search/?nameQuery=${o}`)).data||[]}catch(c){return console.error("Error fetching employee suggestions:",c),[]}};d.useEffect(()=>{e(s.map(o=>({employee:o.employee_id,whitelevel_id:f,employee_id:o.employee_id==="0"?"":o.employee_id,employee_name:o.employee_id==="0"?o.name:o.employee_name,trainer_id:o.employee_id,trainer_name:o.employee_id==="0"?o.name:o.employee_name,trainee_id:o.employee_id==="0"?"":o.employee_id,trainee_name:o.employee_id==="0"?"":o.employee_name})))},[s,e]);const $=o=>/^[a-zA-Z\s.]*$/.test(o),x=()=>{if(s.length===0||s[s.length-1].employee_id&&(s[s.length-1].employee_name||s[s.length-1].name))u([...s,{employee_id:"",whitelevel_id:f,employee_name:"",name:"",error:"",manual:!1,employee_id_error:!1,employee_name_error:!1,disableNameField:!1,invalidCharacterError:!1}]);else{const c=[...s];s[s.length-1].employee_id||(c[s.length-1].employee_id_error=!0),s[s.length-1].employee_name||s[s.length-1].name||(c[s.length-1].employee_name_error=!0),u(c)}},S=o=>{const c=s.filter((n,h)=>h!==o);u(c)},m=async(o,c)=>{const{name:n,value:h}=c.target,l=[...s];if(n==="employee_name"||n==="name")if($(h))l[o].invalidCharacterError=!1;else{l[o].invalidCharacterError=!0,u(l);return}if(l[o][n]=h,n==="employee_id")if(l[o].employee_id_error=!1,l[o].error="",h==="0")l[o].employee_name="",l[o].manual=!0,l[o].disableNameField=!1;else{const C=l.some((_,j)=>_.employee_id===h&&j!==o);if(l[o].error=C?"duplicate":"",C)l[o].disableNameField=!0;else{const _=await k(h,f);_?(l[o].employee_name=_,l[o].manual=!1,l[o].disableNameField=!0):(l[o].error="invalid",l[o].employee_name="",l[o].disableNameField=!0)}}else if(n==="employee_name")if(h.length>0)if(l.some((_,j)=>_.employee_name===h&&j!==o))l[o].error="duplicate",l[o].disableIDField=!0;else{const _=await N(h);g(j=>({...j,[o]:_})),b(j=>({...j,[o]:!0})),l[o].disableIDField=!1}else g(C=>({...C,[o]:[]})),b(C=>({...C,[o]:!1}));else l[o].employee_name_error=!1,n==="name"&&s[o].employee_id==="0"&&(l[o].employee_name_error=!1,l[o].error="");u(l)},w=(o,c)=>{const n=[...s];n.some((l,C)=>l.employee_name===c.employee_name&&C!==o)?(n[o].error="duplicate",n[o].employee_id_error=!0,n[o].employee_name=c.employee_name,n[o].employee_id="",n[o].disableIDField=!0):(n[o].employee_name=c.employee_name,n[o].employee_id=c.employee_id,n[o].manual=!1,n[o].error="",n[o].employee_id_error=!1,n[o].disableIDField=!1),g(l=>({...l,[o]:[]})),b(l=>({...l,[o]:!1})),u(n)},F=o=>{setTimeout(()=>{b(c=>({...c,[o]:!1}))},200)};return r.jsxs(je,{sx:{position:"relative"},children:[r.jsx(Ne,{component:te,sx:{border:"1px solid lightgrey",borderRadius:"8px",boxShadow:"none"},children:r.jsxs($e,{children:[r.jsx(ke,{children:r.jsxs(se,{children:[r.jsx(P,{children:"Sl. No"}),r.jsx(P,{sx:{pl:12},children:"Employee ID"}),r.jsx(P,{sx:{pl:12},children:"Employee Name"}),r.jsx(P,{sx:{pl:2},children:"Actions"})]})}),r.jsx(Fe,{children:s.map((o,c)=>r.jsxs(se,{children:[r.jsx(P,{children:c+1}),r.jsx(P,{children:r.jsx(ae,{variant:"outlined",size:"small",name:"employee_id",value:o.employee_id,onChange:n=>m(c,n),fullWidth:!0,required:!0,error:!!o.error||o.employee_id_error,helperText:o.error==="duplicate"?"Duplicate employee ID":o.error==="invalid"?"Employee does not exist":o.employee_id_error?"Employee ID is required":"",disabled:o.disableIDField,onFocus:()=>b(n=>({...n,[c]:!1}))})}),r.jsxs(P,{children:[r.jsx(ae,{variant:"outlined",size:"small",name:o.manual?"name":"employee_name",value:o.manual?o.name:o.employee_name,onChange:n=>m(c,n),onBlur:()=>F(c),fullWidth:!0,required:!0,disabled:o.disableNameField,error:o.employee_name_error||o.invalidCharacterError,helperText:o.invalidCharacterError?"Invalid characters in employee name":o.employee_name_error?"Employee name is required":""}),R[c]&&y[c]&&r.jsx(te,{sx:{position:"absolute",zIndex:1,maxWidth:"300px"},children:r.jsx(xe,{sx:{maxHeight:200,overflow:"auto"},children:y[c].map((n,h)=>r.jsx(Xe,{button:!0,onClick:()=>w(c,n),children:`${n.employee_name}`},h))})})]}),r.jsx(P,{children:r.jsx(Se,{color:"primary",onClick:()=>S(c),children:r.jsx(Pe,{})})})]},c))})]})}),r.jsx(Ge,{color:"primary",size:"small",onClick:x,sx:{position:"absolute",bottom:-18,left:"49%",transform:"translateX(-50%)",boxShadow:"none",zIndex:1},children:r.jsx(Ae,{})})]})};mo.prototype={onEmployeesChange:Q.func.isRequired,initialData:Q.arrayOf(Q.object).isRequired};export{Io as R,mo as T,Ro as a};
