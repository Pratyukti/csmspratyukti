import{r as d,R as ee,j as e,P as f,D as K}from"./index-BOrs9Cmb.js";import{d as ue,a as me}from"./FilterList-CnZNjnGE.js";import{B as _}from"./Box-DpLwRB0J.js";import{P as V,T as M,I as W}from"./IconButton-SZuj0VD6.js";import{T as A,a as H,e as L,c as g,d as u,b as z}from"./TableRow-BtW6bwTe.js";import{T as X,a as Y,v as Z,b as se,c as G}from"./TableSortLabel-CsDftX1q.js";import{D as te,a as ne,b as re,c as oe}from"./DialogTitle-Dh-rii3b.js";import{B as ae}from"./Button-Be_xG8_1.js";import{a as pe}from"./colorManipulator-CjKHz3UW.js";import{d as Se,E as Pe}from"./jspdf.plugin.autotable-BKYhmki5.js";import{T as Re}from"./TextField-D9XwQG_q.js";import"./createSvgIcon-CPmCxJRd.js";import"./DefaultLayout-CiqnaNuY.js";import"./index.esm-DYk-UL72.js";import"./cil-user-Ddrdy7PS.js";import"./dividerClasses-BjxhlnSS.js";function ie(r,t,s){return t[s]<r[s]?-1:t[s]>r[s]?1:0}function Te(r,t){return r==="desc"?(s,o)=>ie(s,o,t):(s,o)=>-ie(s,o,t)}function Ce(r,t){const s=r.map((o,i)=>[o,i]);return s.sort((o,i)=>{const n=t(o[0],i[0]);return n!==0?n:o[1]-i[1]}),s.map(o=>o[0])}const De=[{id:"item_name",numeric:!1,disablePadding:!0,label:"Item Name"},{id:"count",numeric:!0,disablePadding:!1,label:"Count"}];function he(r){const{order:t,orderBy:s,onRequestSort:o}=r,i=n=>l=>{o(l,n)};return e.jsx(z,{children:e.jsx(g,{children:De.map(n=>e.jsx(u,{align:n.numeric?"right":"left",padding:n.disablePadding?"4":"normal",sortDirection:s===n.id?t:!1,children:e.jsxs(Y,{active:s===n.id,direction:s===n.id?t:"asc",onClick:i(n.id),children:[n.label,s===n.id?e.jsx(_,{component:"span",sx:Z,children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}he.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function xe(r){const{numSelected:t}=r;return e.jsxs(se,{sx:{pl:{sm:2},pr:{xs:1,sm:1},...t>0&&{bgcolor:s=>pe(s.palette.primary.main,s.palette.action.activatedOpacity)}},children:[t>0?e.jsxs(M,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):e.jsx(M,{sx:{flex:"1 1 100%",textAlign:"center"},variant:"h6",id:"tableTitle",component:"div",children:"TOOL LIST"}),t>0?e.jsx(G,{title:"Delete",children:e.jsx(W,{children:e.jsx(ue,{})})}):e.jsx(G,{title:"Filter list",children:e.jsx(W,{children:e.jsx(me,{})})})]})}xe.propTypes={numSelected:f.number.isRequired};function Ee(){const[r,t]=d.useState("asc"),[s,o]=d.useState("item_name"),[i,n]=d.useState([]),[l,P]=d.useState(0),[h,q]=d.useState(5),[R,T]=d.useState(!1),[C,D]=d.useState([]),[j,$]=d.useState([]),[I,O]=d.useState({});d.useEffect(()=>{(async()=>{try{const p=(await K.get("/item/upcomingIssue/30/?filter=Tool")).data.data.Tool,B=Object.entries(p).map(([b,y],S)=>({id:S,item_name:b,count:y.count})),U=Object.entries(p).reduce((b,[y,S])=>{const F=S.issued_to.map(({employee_id:J,employee_name:Q})=>({empCode:J,empName:Q}));return{...b,[y]:F}},{});$(B),O(U)}catch(c){if(c.isAxiosError&&c.response){console.error(`HTTP error! status: ${c}`);const p=JSON.stringify(c.response.data);console.error("Response body:",p),alert(`Error: ${p}`)}console.error("Error fetching data:",c)}})()},[]);const k=(a,c)=>{t(s===c&&r==="asc"?"desc":"asc"),o(c)},N=(a,c)=>{const p=I[a];D(p),T(!0)},m=()=>{T(!1),D([])},x=(a,c)=>{P(c)},E=a=>{q(parseInt(a.target.value,10)),P(0)},w=l>0?Math.max(0,(1+l)*h-j.length):0,v=ee.useMemo(()=>Ce(j,Te(r,s)).slice(l*h,l*h+h),[r,s,l,j,h]);return e.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:[e.jsxs(V,{sx:{width:"100%",mb:2},children:[e.jsx(xe,{numSelected:i.length}),e.jsx(A,{children:e.jsxs(H,{"aria-labelledby":"tableTitle",size:"medium",children:[e.jsx(he,{order:r,orderBy:s,onRequestSort:k}),e.jsxs(L,{children:[v.map(a=>e.jsxs(g,{children:[e.jsx(u,{component:"th",scope:"row",padding:"4",children:a.item_name}),e.jsx(u,{align:"right",onClick:()=>N(a.item_name,a.count),style:{cursor:"pointer"},children:a.count})]})),w>0&&e.jsx(g,{style:{height:53*w},children:e.jsx(u,{colSpan:2})})]})]})}),e.jsx(X,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:h,page:l,onPageChange:x,onRowsPerPageChange:E})]}),e.jsxs(te,{open:R,onClose:m,children:[e.jsx(ne,{children:"Employee Details"}),e.jsx(re,{children:e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(u,{children:"Employee Code"}),e.jsx(u,{children:"Employee Name"})]})}),e.jsx(L,{children:C&&C.map(a=>e.jsxs(g,{children:[e.jsx(u,{children:a.empCode}),e.jsx(u,{children:a.empName})]},a.empCode))})]})})}),e.jsx(oe,{children:e.jsx(ae,{onClick:m,color:"primary",children:"Close"})})]})]})}function ce(r,t,s){return t[s]<r[s]?-1:t[s]>r[s]?1:0}function we(r,t){return r==="desc"?(s,o)=>ce(s,o,t):(s,o)=>-ce(s,o,t)}function ve(r,t){const s=r.map((o,i)=>[o,i]);return s.sort((o,i)=>{const n=t(o[0],i[0]);return n!==0?n:o[1]-i[1]}),s.map(o=>o[0])}const _e=[{id:"item_name",numeric:!1,disablePadding:!0,label:"Item Name"},{id:"count",numeric:!0,disablePadding:!1,label:"Count"}];function ge(r){const{order:t,orderBy:s,onRequestSort:o}=r,i=n=>l=>{o(l,n)};return e.jsx(z,{children:e.jsx(g,{children:_e.map(n=>e.jsx(u,{align:n.numeric?"right":"left",padding:n.disablePadding?"4":"normal",sortDirection:s===n.id?t:!1,children:e.jsxs(Y,{active:s===n.id,direction:s===n.id?t:"asc",onClick:i(n.id),children:[n.label,s===n.id?e.jsx(_,{component:"span",sx:Z,children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}ge.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function je(r){const{numSelected:t}=r;return e.jsxs(se,{sx:{pl:{sm:2},pr:{xs:1,sm:1},...t>0&&{bgcolor:s=>pe(s.palette.primary.main,s.palette.action.activatedOpacity)}},children:[t>0?e.jsxs(M,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):e.jsx(M,{sx:{flex:"1 1 100%",textAlign:"center"},variant:"h6",id:"tableTitle",component:"div",children:"PPE LIST"}),t>0?e.jsx(G,{title:"Delete",children:e.jsx(W,{children:e.jsx(ue,{})})}):e.jsx(G,{title:"Filter list",children:e.jsx(W,{children:e.jsx(me,{})})})]})}je.propTypes={numSelected:f.number.isRequired};function Oe(){const[r,t]=d.useState("asc"),[s,o]=d.useState("item_name"),[i,n]=d.useState([]),[l,P]=d.useState(0),[h,q]=d.useState(5),[R,T]=d.useState(!1),[C,D]=d.useState([]),[j,$]=d.useState([]),[I,O]=d.useState({});d.useEffect(()=>{(async()=>{try{const p=(await K.get("/item/upcomingIssue/30/?filter=PPE")).data.data.PPE,B=Object.entries(p).map(([b,y],S)=>({id:S,item_name:b,count:y.count})),U=Object.entries(p).reduce((b,[y,S])=>{const F=S.issued_to.map(({employee_id:J,employee_name:Q})=>({empCode:J,empName:Q}));return{...b,[y]:F}},{});$(B),O(U)}catch(c){if(c.isAxiosError&&c.response){console.error(`HTTP error! status: ${c}`);const p=JSON.stringify(c.response.data);console.error("Response body:",p),alert(`Error: ${p}`)}console.error("Error fetching data:",c)}})()},[]);const k=(a,c)=>{t(s===c&&r==="asc"?"desc":"asc"),o(c)},N=(a,c)=>{const p=I[a];D(p),T(!0)},m=()=>{T(!1),D([])},x=(a,c)=>{P(c)},E=a=>{q(parseInt(a.target.value,10)),P(0)},w=l>0?Math.max(0,(1+l)*h-j.length):0,v=ee.useMemo(()=>ve(j,we(r,s)).slice(l*h,l*h+h),[r,s,l,j,h]);return e.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:[e.jsxs(V,{sx:{width:"100%",mb:2},children:[e.jsx(je,{numSelected:i.length}),e.jsx(A,{children:e.jsxs(H,{"aria-labelledby":"tableTitle",size:"medium",children:[e.jsx(ge,{order:r,orderBy:s,onRequestSort:k}),e.jsxs(L,{children:[v.map(a=>e.jsxs(g,{children:[e.jsx(u,{component:"th",scope:"row",padding:"4",children:a.item_name}),e.jsx(u,{align:"right",onClick:()=>N(a.item_name,a.count),style:{cursor:"pointer"},children:a.count})]})),w>0&&e.jsx(g,{style:{height:53*w},children:e.jsx(u,{colSpan:2})})]})]})}),e.jsx(X,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:h,page:l,onPageChange:x,onRowsPerPageChange:E})]}),e.jsxs(te,{open:R,onClose:m,children:[e.jsx(ne,{children:"Employee Details"}),e.jsx(re,{children:e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(u,{children:"Employee Code"}),e.jsx(u,{children:"Employee Name"})]})}),e.jsx(L,{children:C&&C.map(a=>e.jsxs(g,{children:[e.jsx(u,{children:a.empCode}),e.jsx(u,{children:a.empName})]},a.empCode))})]})})}),e.jsx(oe,{children:e.jsx(ae,{onClick:m,color:"primary",children:"Close"})})]})]})}const ke=[{id:"slno",numeric:!1,disablePadding:!0,label:"SL NO"},{id:"employee_id",numeric:!0,disablePadding:!1,label:"Employee Code"},{id:"employee_name",numeric:!0,disablePadding:!1,label:"Employee Name"},{id:"checkup_date",numeric:!0,disablePadding:!1,label:"Checkup Date"},{id:"checkup_image",numeric:!0,disablePadding:!1,label:"Checkup Image"}];function fe(r){const{order:t,orderBy:s,onRequestSort:o}=r,i=n=>l=>{o(l,n)};return e.jsx(z,{children:e.jsx(g,{children:ke.map(n=>e.jsx(u,{align:n.numeric?"right":"left",padding:n.disablePadding?"none":"normal",sortDirection:s===n.id?t:!1,children:e.jsxs(Y,{active:s===n.id,direction:s===n.id?t:"asc",onClick:i(n.id),children:[n.label,s===n.id?e.jsx(_,{component:"span",sx:Z,children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}fe.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function de(r,t,s){return t[s]<r[s]?-1:t[s]>r[s]?1:0}function qe(r,t){return r==="desc"?(s,o)=>de(s,o,t):(s,o)=>-de(s,o,t)}function $e(r,t){const s=r.map((o,i)=>[o,i]);return s.sort((o,i)=>{const n=t(o[0],i[0]);return n!==0?n:o[1]-i[1]}),s.map(o=>o[0])}function Ie(){const[r,t]=d.useState("asc"),[s,o]=d.useState("employee_id"),[i,n]=d.useState(0),[l,P]=d.useState(5),[h,q]=d.useState([]),[R,T]=d.useState("");d.useEffect(()=>{(async()=>{try{const w=(await K.get("/medical/upcoming/30/")).data.data.map((v,a)=>({id:a+1,slno:a+1,employee_id:v.employee_id,employee_name:v.employee_name,checkup_date:v.checkup_date,checkup_image:v.checkup_image}));q(w)}catch(x){if(x.isAxiosError&&x.response){console.error(`HTTP error! status: ${x}`);const E=JSON.stringify(x.response.data);console.error("Response body:",E),alert(`Error: ${E}`)}console.error("Error fetching data:",x)}})()},[]);const C=(m,x)=>{t(s===x&&r==="asc"?"desc":"asc"),o(x)},D=(m,x)=>{n(x)},j=m=>{P(parseInt(m.target.value,10)),n(0)},$=()=>{const m=new Pe;m.autoTable({head:[["SL NO","Employee Code","Employee Name","Checkup Date","Checkup Image"]],body:h.map(x=>[x.slno,x.employee_id,x.employee_name,x.checkup_date,x.checkup_image])}),m.save("Upcoming 30 days medical-checkup-reports.pdf")},I=m=>{T(m.target.value)},O=h.filter(m=>m.employee_id.toLowerCase().includes(R.toLowerCase())||m.employee_name.toLowerCase().includes(R.toLowerCase())||m.checkup_date.toLowerCase().includes(R.toLowerCase())),k=i>0?Math.max(0,(1+i)*l-O.length):0,N=$e(O,qe(r,s)).slice(i*l,i*l+l);return e.jsx(_,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:e.jsxs(V,{sx:{width:"100%",mb:2,padding:5},children:[e.jsxs(_,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(M,{variant:"h6",id:"tableTitle",component:"div",children:"Medical Checkup Report"}),e.jsxs(_,{children:[e.jsx(Re,{variant:"outlined",size:"small",placeholder:"Search...",value:R,onChange:I,sx:{marginRight:2}}),e.jsx(G,{title:"Download PDF",children:e.jsx(W,{onClick:$,children:e.jsx(Se,{})})})]})]}),e.jsx(A,{children:e.jsxs(H,{sx:{minWidth:730},"aria-labelledby":"tableTitle",children:[e.jsx(fe,{order:r,orderBy:s,onRequestSort:C}),e.jsxs(L,{children:[N.map(m=>e.jsxs(g,{hover:!0,sx:{cursor:"pointer"},children:[e.jsx(u,{component:"th",scope:"row",padding:"none",children:m.slno}),e.jsx(u,{align:"right",children:m.employee_id}),e.jsx(u,{align:"right",children:m.employee_name}),e.jsx(u,{align:"right",children:m.checkup_date}),e.jsx(u,{align:"right",children:m.checkup_image})]},m.id)),k>0&&e.jsx(g,{style:{height:53*k},children:e.jsx(u,{colSpan:5})})]})]})}),e.jsx(X,{rowsPerPageOptions:[5,10,25],component:"div",count:O.length,rowsPerPage:l,page:i,onPageChange:D,onRowsPerPageChange:j})]})})}function le(r,t,s){return t[s]<r[s]?-1:t[s]>r[s]?1:0}function Ne(r,t){return r==="desc"?(s,o)=>le(s,o,t):(s,o)=>-le(s,o,t)}function Ae(r,t){const s=r.map((o,i)=>[o,i]);return s.sort((o,i)=>{const n=t(o[0],i[0]);return n!==0?n:o[1]-i[1]}),s.map(o=>o[0])}const He=[{id:"item_name",numeric:!1,disablePadding:!0,label:"Item Name"},{id:"count",numeric:!0,disablePadding:!1,label:"Count"}];function be(r){const{order:t,orderBy:s,onRequestSort:o}=r,i=n=>l=>{o(l,n)};return e.jsx(z,{children:e.jsx(g,{children:He.map(n=>e.jsx(u,{align:n.numeric?"right":"left",padding:n.disablePadding?"4":"normal",sortDirection:s===n.id?t:!1,children:e.jsxs(Y,{active:s===n.id,direction:s===n.id?t:"asc",onClick:i(n.id),children:[n.label,s===n.id?e.jsx(_,{component:"span",sx:Z,children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}be.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function ye(r){return e.jsx(se,{children:e.jsx(M,{sx:{flex:"1 1 100%",textAlign:"center"},variant:"h6",id:"tableTitle",component:"div",children:"DRESS LIST"})})}ye.propTypes={numSelected:f.number.isRequired};function Le(){const[r,t]=d.useState("asc"),[s,o]=d.useState("item_name"),[i,n]=d.useState([]),[l,P]=d.useState(0),[h,q]=d.useState(5),[R,T]=d.useState(!1),[C,D]=d.useState([]),[j,$]=d.useState([]),[I,O]=d.useState({});d.useEffect(()=>{(async()=>{try{const p=(await K.get("/item/upcomingIssue/30/?filter=Dress")).data.data.Dress,B=Object.entries(p).map(([b,y],S)=>({id:S,item_name:b,count:y.count})),U=Object.entries(p).reduce((b,[y,S])=>{const F=S.issued_to.map(({employee_id:J,employee_name:Q})=>({empCode:J,empName:Q}));return{...b,[y]:F}},{});$(B),O(U)}catch(c){if(c.isAxiosError&&c.response){console.error(`HTTP error! status: ${c}`);const p=JSON.stringify(c.response.data);console.error("Response body:",p),alert(`Error: ${p}`)}console.error("Error fetching data:",c)}})()},[]);const k=(a,c)=>{t(s===c&&r==="asc"?"desc":"asc"),o(c)},N=(a,c)=>{const p=I[a];D(p),T(!0)},m=()=>{T(!1),D([])},x=(a,c)=>{P(c)},E=a=>{q(parseInt(a.target.value,10)),P(0)},w=l>0?Math.max(0,(1+l)*h-j.length):0,v=ee.useMemo(()=>Ae(j,Ne(r,s)).slice(l*h,l*h+h),[r,s,l,j,h]);return e.jsxs(_,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:[e.jsxs(V,{sx:{width:"100%",mb:2},children:[e.jsx(ye,{numSelected:i.length}),e.jsx(A,{children:e.jsxs(H,{"aria-labelledby":"tableTitle",size:"medium",children:[e.jsx(be,{order:r,orderBy:s,onRequestSort:k}),e.jsxs(L,{children:[v.map((a,c)=>e.jsxs(g,{children:[e.jsx(u,{component:"th",scope:"row",padding:"4",children:a.item_name}),e.jsx(u,{align:"right",onClick:()=>N(a.item_name,a.count),style:{cursor:"pointer"},children:a.count})]})),w>0&&e.jsx(g,{style:{height:53*w},children:e.jsx(u,{colSpan:2})})]})]})}),e.jsx(X,{rowsPerPageOptions:[5,10,25],component:"div",count:j.length,rowsPerPage:h,page:l,onPageChange:x,onRowsPerPageChange:E})]}),e.jsxs(te,{open:R,onClose:m,children:[e.jsx(ne,{children:"Employee Details"}),e.jsx(re,{children:e.jsx(A,{children:e.jsxs(H,{children:[e.jsx(z,{children:e.jsxs(g,{children:[e.jsx(u,{children:"Employee Code"}),e.jsx(u,{children:"Employee Name"})]})}),e.jsx(L,{children:C&&C.map(a=>e.jsxs(g,{children:[e.jsx(u,{children:a.empCode}),e.jsx(u,{children:a.empName})]},a.empCode))})]})})}),e.jsx(oe,{children:e.jsx(ae,{onClick:m,color:"primary",children:"Close"})})]})]})}function ts(){return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{}),e.jsx(Oe,{}),e.jsx(Le,{}),e.jsx(Ie,{})]})}export{ts as default};
