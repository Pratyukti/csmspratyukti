import{g as B,a as O,s as P,b as u,d as H,_ as E,e as L,f as T,j as w,w as me,x as fe,u as le,c as ie,q as ce,k as W,y as ye,z as ge,A as he}from"./createSvgIcon-CPmCxJRd.js";import{r as d,j as a,h as ve,D as K}from"./index-BOrs9Cmb.js";import{S as be}from"./FormControlLabel-DOo0s4Nv.js";import{u as Ce,f as _e,L as q,i as ee,b as Re,P as oe,c as Ie,I as xe}from"./IconButton-SZuj0VD6.js";import{B as Se}from"./Box-DpLwRB0J.js";import{T as je,a as $e,b as ke,c as te,d as N,e as Fe}from"./TableRow-BtW6bwTe.js";import{T as se}from"./TextField-D9XwQG_q.js";import{D as Ne,F as Pe,A as Ge}from"./Training4-Cu7BmkG1.js";function Ae(e){return O("MuiFormGroup",e)}B("MuiFormGroup",["root","row","error"]);const Le=["className","row"],Me=e=>{const{classes:t,row:r,error:s}=e;return T({root:["root",r&&"row",s&&"error"]},Ae,t)},ze=P("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(({ownerState:e})=>u({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),Ee=d.forwardRef(function(t,r){const s=H({props:t,name:"MuiFormGroup"}),{className:c,row:p=!1}=s,b=E(s,Le),y=Ce(),m=_e({props:s,muiFormControl:y,states:["error"]}),v=u({},s,{row:p,error:m.error}),g=Me(v);return a.jsx(ze,u({className:L(g.root,c),ownerState:v,ref:r},b))});function Be(e){return O("MuiListItem",e)}const z=B("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),De=B("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function we(e){return O("MuiListItemSecondaryAction",e)}B("MuiListItemSecondaryAction",["root","disableGutters"]);const Oe=["className"],Te=e=>{const{disableGutters:t,classes:r}=e;return T({root:["root",t&&"disableGutters"]},we,r)},Ue=P("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})(({ownerState:e})=>u({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),de=d.forwardRef(function(t,r){const s=H({props:t,name:"MuiListItemSecondaryAction"}),{className:c}=s,p=E(s,Oe),b=d.useContext(q),y=u({},s,{disableGutters:b.disableGutters}),m=Te(y);return a.jsx(Ue,u({className:L(m.root,c),ownerState:y,ref:r},p))});de.muiName="ListItemSecondaryAction";const Ve=["className"],qe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],We=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.button&&t.button,r.hasSecondaryAction&&t.secondaryAction]},He=e=>{const{alignItems:t,button:r,classes:s,dense:c,disabled:p,disableGutters:b,disablePadding:y,divider:m,hasSecondaryAction:v,selected:g}=e;return T({root:["root",c&&"dense",!b&&"gutters",!y&&"padding",m&&"divider",p&&"disabled",r&&"button",t==="flex-start"&&"alignItemsFlexStart",v&&"secondaryAction",g&&"selected"],container:["container"]},Be,s)},Ze=P("div",{name:"MuiListItem",slot:"Root",overridesResolver:We})(({theme:e,ownerState:t})=>u({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&u({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${De.root}`]:{paddingRight:48}},{[`&.${z.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${z.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${z.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${z.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${z.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),Qe=P("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),Xe=d.forwardRef(function(t,r){const s=H({props:t,name:"MuiListItem"}),{alignItems:c="center",autoFocus:p=!1,button:b=!1,children:y,className:m,component:v,components:g={},componentsProps:I={},ContainerComponent:x="li",ContainerProps:{className:F}={},dense:$=!1,disabled:k=!1,disableGutters:C=!1,disablePadding:_=!1,divider:f=!1,focusVisibleClassName:o,secondaryAction:n,selected:l=!1,slotProps:h={},slots:i={}}=s,R=E(s.ContainerProps,Ve),S=E(s,qe),j=d.useContext(q),Z=d.useMemo(()=>({dense:$||j.dense||!1,alignItems:c,disableGutters:C}),[c,j.dense,$,C]),Q=d.useRef(null);me(()=>{p&&Q.current&&Q.current.focus()},[p]);const M=d.Children.toArray(y),X=M.length&&fe(M[M.length-1],["ListItemSecondaryAction"]),U=u({},s,{alignItems:c,autoFocus:p,button:b,dense:Z.dense,disabled:k,disableGutters:C,disablePadding:_,divider:f,hasSecondaryAction:X,selected:l}),Y=He(U),J=le(Q,r),V=i.root||g.Root||Ze,D=h.root||I.root||{},G=u({className:L(Y.root,D.className,m),disabled:k},S);let A=v||"li";return b&&(G.component=v||"div",G.focusVisibleClassName=L(z.focusVisible,o),A=Re),X?(A=!G.component&&!v?"div":A,x==="li"&&(A==="li"?A="div":G.component==="li"&&(G.component="div")),a.jsx(q.Provider,{value:Z,children:a.jsxs(Qe,u({as:x,className:L(Y.container,F),ref:J,ownerState:U},R,{children:[a.jsx(V,u({},D,!ee(V)&&{as:A,ownerState:u({},U,D.ownerState)},G,{children:M})),M.pop()]}))})):a.jsx(q.Provider,{value:Z,children:a.jsxs(V,u({},D,{as:A,ref:J},!ee(V)&&{ownerState:u({},U,D.ownerState)},G,{children:[M,n&&a.jsx(de,{children:n})]}))})}),Ye=ie(a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),Je=ie(a.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Ke=P("span",{shouldForwardProp:ce})({position:"relative",display:"flex"}),eo=P(Ye)({transform:"scale(1)"}),oo=P(Je)(({theme:e,ownerState:t})=>u({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function ue(e){const{checked:t=!1,classes:r={},fontSize:s}=e,c=u({},e,{checked:t});return a.jsxs(Ke,{className:r.root,ownerState:c,children:[a.jsx(eo,{fontSize:s,className:r.background,ownerState:c}),a.jsx(oo,{fontSize:s,className:r.dot,ownerState:c})]})}const pe=d.createContext(void 0);function to(){return d.useContext(pe)}function so(e){return O("MuiRadio",e)}const ae=B("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),ao=["checked","checkedIcon","color","icon","name","onChange","size","className"],ro=e=>{const{classes:t,color:r,size:s}=e,c={root:["root",`color${W(r)}`,s!=="medium"&&`size${W(s)}`]};return u({},t,T(c,so,t))},no=P(be,{shouldForwardProp:e=>ce(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.size!=="medium"&&t[`size${W(r.size)}`],t[`color${W(r.color)}`]]}})(({theme:e,ownerState:t})=>u({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:w(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${ae.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${ae.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function lo(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const re=a.jsx(ue,{checked:!0}),ne=a.jsx(ue,{}),Co=d.forwardRef(function(t,r){var s,c;const p=H({props:t,name:"MuiRadio"}),{checked:b,checkedIcon:y=re,color:m="primary",icon:v=ne,name:g,onChange:I,size:x="medium",className:F}=p,$=E(p,ao),k=u({},p,{color:m,size:x}),C=ro(k),_=to();let f=b;const o=ye(I,_&&_.onChange);let n=g;return _&&(typeof f>"u"&&(f=lo(_.value,p.value)),typeof n>"u"&&(n=_.name)),a.jsx(no,u({type:"radio",icon:d.cloneElement(v,{fontSize:(s=ne.props.fontSize)!=null?s:x}),checkedIcon:d.cloneElement(y,{fontSize:(c=re.props.fontSize)!=null?c:x}),ownerState:k,classes:C,name:n,checked:f,onChange:o,ref:r,className:L(C.root,F)},$))});function io(e){return O("MuiRadioGroup",e)}B("MuiRadioGroup",["root","row","error"]);const co=["actions","children","className","defaultValue","name","onChange","value"],uo=e=>{const{classes:t,row:r,error:s}=e;return T({root:["root",r&&"row",s&&"error"]},io,t)},_o=d.forwardRef(function(t,r){const{actions:s,children:c,className:p,defaultValue:b,name:y,onChange:m,value:v}=t,g=E(t,co),I=d.useRef(null),x=uo(t),[F,$]=ge({controlled:v,default:b,name:"RadioGroup"});d.useImperativeHandle(s,()=>({focus:()=>{let f=I.current.querySelector("input:not(:disabled):checked");f||(f=I.current.querySelector("input:not(:disabled)")),f&&f.focus()}}),[]);const k=le(r,I),C=he(y),_=d.useMemo(()=>({name:C,onChange(f){$(f.target.value),m&&m(f,f.target.value)},value:F}),[C,m,$,F]);return a.jsx(pe.Provider,{value:_,children:a.jsx(Ee,u({role:"radiogroup",ref:k,className:L(x.root,p)},g,{children:c}))})}),Ro=({onEmployeesChange:e,initialData:t})=>{const r=ve(o=>o.userInfo),[s,c]=d.useState(t||[]),[p,b]=d.useState(r.whitelevel_id),[y,m]=d.useState({}),[v,g]=d.useState({});d.useEffect(()=>{if(t&&t.length>0&&s.length===0){const o=t.map(n=>({...n}));c(o)}},[t]);const I=async(o,n)=>{try{return(await K.post("/employee/name/",{employee_id:o,whitelevel_id:n})).data.employee_name||""}catch(l){return console.error("Error fetching employee name:",l),""}},x=async o=>{try{return(await K.get(`/employee/search/?nameQuery=${o}`)).data||[]}catch(n){return console.error("Error fetching employee suggestions:",n),[]}};d.useEffect(()=>{e(s.map(o=>({employee:o.employee_id,whitelevel_id:p,employee_id:o.employee_id==="0"?"":o.employee_id,employee_name:o.employee_id==="0"?o.name:o.employee_name,trainer_id:o.employee_id,trainer_name:o.employee_id==="0"?o.name:o.employee_name,trainee_id:o.employee_id==="0"?"":o.employee_id,trainee_name:o.employee_id==="0"?"":o.employee_name})))},[s,e]);const F=o=>/^[a-zA-Z\s.]*$/.test(o),$=()=>{if(s.length===0||s[s.length-1].employee_id&&(s[s.length-1].employee_name||s[s.length-1].name))c([...s,{employee_id:"",whitelevel_id:p,employee_name:"",name:"",error:"",manual:!1,employee_id_error:!1,employee_name_error:!1,disableNameField:!1,invalidCharacterError:!1}]);else{const n=[...s];s[s.length-1].employee_id||(n[s.length-1].employee_id_error=!0),s[s.length-1].employee_name||s[s.length-1].name||(n[s.length-1].employee_name_error=!0),c(n)}},k=o=>{const n=s.filter((l,h)=>h!==o);c(n)},C=async(o,n)=>{const{name:l,value:h}=n.target,i=[...s];if(l==="employee_name"||l==="name")if(F(h))i[o].invalidCharacterError=!1;else{i[o].invalidCharacterError=!0,c(i);return}if(i[o][l]=h,l==="employee_id")if(i[o].employee_id_error=!1,i[o].error="",h==="0")i[o].employee_name="",i[o].manual=!0,i[o].disableNameField=!1;else{const R=i.some((S,j)=>S.employee_id===h&&j!==o);if(i[o].error=R?"duplicate":"",R)i[o].disableNameField=!0;else{const S=await I(h,p);S?(i[o].employee_name=S,i[o].manual=!1,i[o].disableNameField=!0):(i[o].error="invalid",i[o].employee_name="",i[o].disableNameField=!0)}}else if(l==="employee_name")if(h.length>0)if(i.some((S,j)=>S.employee_name===h&&j!==o))i[o].error="duplicate",i[o].disableIDField=!0;else{const S=await x(h);m(j=>({...j,[o]:S})),g(j=>({...j,[o]:!0})),i[o].disableIDField=!1}else m(R=>({...R,[o]:[]})),g(R=>({...R,[o]:!1}));else i[o].employee_name_error=!1,l==="name"&&s[o].employee_id==="0"&&(i[o].employee_name_error=!1,i[o].error="");c(i)},_=(o,n)=>{const l=[...s];l.some((i,R)=>i.employee_name===n.employee_name&&R!==o)?(l[o].error="duplicate",l[o].employee_id_error=!0,l[o].employee_name=n.employee_name,l[o].employee_id="",l[o].disableIDField=!0):(l[o].employee_name=n.employee_name,l[o].employee_id=n.employee_id,l[o].manual=!1,l[o].error="",l[o].employee_id_error=!1,l[o].disableIDField=!1),m(i=>({...i,[o]:[]})),g(i=>({...i,[o]:!1})),c(l)},f=o=>{setTimeout(()=>{g(n=>({...n,[o]:!1}))},200)};return a.jsxs(Se,{sx:{position:"relative"},children:[a.jsx(je,{component:oe,sx:{border:"1px solid lightgrey",borderRadius:"8px",boxShadow:"none"},children:a.jsxs($e,{children:[a.jsx(ke,{children:a.jsxs(te,{children:[a.jsx(N,{children:"Sl. No"}),a.jsx(N,{sx:{pl:12},children:"Employee ID"}),a.jsx(N,{sx:{pl:12},children:"Employee Name"}),a.jsx(N,{sx:{pl:2},children:"Actions"})]})}),a.jsx(Fe,{children:s.map((o,n)=>a.jsxs(te,{children:[a.jsx(N,{children:n+1}),a.jsx(N,{children:a.jsx(se,{variant:"outlined",size:"small",name:"employee_id",value:o.employee_id,onChange:l=>C(n,l),fullWidth:!0,required:!0,error:!!o.error||o.employee_id_error,helperText:o.error==="duplicate"?"Duplicate employee ID":o.error==="invalid"?"Employee does not exist":o.employee_id_error?"Employee ID is required":"",disabled:o.disableIDField,onFocus:()=>g(l=>({...l,[n]:!1}))})}),a.jsxs(N,{children:[a.jsx(se,{variant:"outlined",size:"small",name:o.manual?"name":"employee_name",value:o.manual?o.name:o.employee_name,onChange:l=>C(n,l),onBlur:()=>f(n),fullWidth:!0,required:!0,disabled:o.disableNameField,error:o.employee_name_error||o.invalidCharacterError,helperText:o.invalidCharacterError?"Invalid characters in employee name":o.employee_name_error?"Employee name is required":""}),v[n]&&y[n]&&a.jsx(oe,{sx:{position:"absolute",zIndex:1,maxWidth:"300px"},children:a.jsx(Ie,{sx:{maxHeight:200,overflow:"auto"},children:y[n].map((l,h)=>a.jsx(Xe,{button:!0,onClick:()=>_(n,l),children:`${l.employee_name}`},h))})})]}),a.jsx(N,{children:a.jsx(xe,{color:"primary",onClick:()=>k(n),children:a.jsx(Ne,{})})})]},n))})]})}),a.jsx(Pe,{color:"primary",size:"small",onClick:$,sx:{position:"absolute",bottom:-18,left:"49%",transform:"translateX(-50%)",boxShadow:"none",zIndex:1},children:a.jsx(Ge,{})})]})};export{_o as R,Ro as T,Co as a};
