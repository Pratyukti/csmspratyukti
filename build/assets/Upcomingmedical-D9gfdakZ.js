import{r as l,j as e,P as f,D as O}from"./index-BOrs9Cmb.js";import{d as H,E as N}from"./jspdf.plugin.autotable-BKYhmki5.js";import{B as h}from"./Box-DpLwRB0J.js";import{P as A,T as B,I}from"./IconButton-SZuj0VD6.js";import{T as z}from"./TextField-D9XwQG_q.js";import{c as F,T as M,a as Q,v as $}from"./TableSortLabel-CsDftX1q.js";import{T as J,a as U,e as W,c as y,d as p,b as G}from"./TableRow-BtW6bwTe.js";import"./createSvgIcon-CPmCxJRd.js";import"./DefaultLayout-CiqnaNuY.js";import"./index.esm-DYk-UL72.js";import"./cil-user-Ddrdy7PS.js";import"./dividerClasses-BjxhlnSS.js";const K=[{id:"slno",numeric:!1,disablePadding:!0,label:"SL NO"},{id:"employee_id",numeric:!0,disablePadding:!1,label:"Employee Code"},{id:"employee_name",numeric:!0,disablePadding:!1,label:"Employee Name"},{id:"checkup_date",numeric:!0,disablePadding:!1,label:"Checkup Date"}];function S(i){const{order:r,orderBy:s,onRequestSort:o}=i,c=a=>d=>{o(d,a)};return e.jsx(G,{children:e.jsx(y,{children:K.map(a=>e.jsx(p,{align:a.numeric?"right":"left",padding:a.disablePadding?"none":"normal",sortDirection:s===a.id?r:!1,children:e.jsxs(Q,{active:s===a.id,direction:s===a.id?r:"asc",onClick:c(a.id),children:[a.label,s===a.id?e.jsx(h,{component:"span",sx:$,children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},a.id))})})}S.propTypes={onRequestSort:f.func.isRequired,order:f.oneOf(["asc","desc"]).isRequired,orderBy:f.string.isRequired};function T(i,r,s){return r[s]<i[s]?-1:r[s]>i[s]?1:0}function V(i,r){return i==="desc"?(s,o)=>T(s,o,r):(s,o)=>-T(s,o,r)}function X(i,r){const s=i.map((o,c)=>[o,c]);return s.sort((o,c)=>{const a=r(o[0],c[0]);return a!==0?a:o[1]-c[1]}),s.map(o=>o[0])}function le(){const[i,r]=l.useState("asc"),[s,o]=l.useState("employee_id"),[c,a]=l.useState(0),[d,_]=l.useState(5),[b,R]=l.useState([]),[m,C]=l.useState("");l.useEffect(()=>{(async()=>{try{const q=(await O.get("/reports/organization/medicalcheckup/employeeinfo/")).data.data.map((x,P)=>({id:P+1,slno:P+1,employee_id:x.employee_id,employee_name:x.employee_name,checkup_date:x.checkup_date}));R(q)}catch(n){if(n.isAxiosError&&n.response){console.error(`HTTP error! status: ${n}`);const u=JSON.stringify(n.response.data);console.error("Response body:",u),alert(`Error: ${u}`)}console.error("Error fetching data:",n)}})()},[]);const w=(t,n)=>{r(s===n&&i==="asc"?"desc":"asc"),o(n)},v=(t,n)=>{a(n)},k=t=>{_(parseInt(t.target.value,10)),a(0)},D=()=>{const t=new N;t.autoTable({head:[["SL NO","Employee Code","Employee Name","Checkup Date"]],body:b.map(n=>[n.slno,n.employee_id,n.employee_name,n.checkup_date])}),t.save("medical-checkup-reports.pdf")},E=t=>{C(t.target.value)},g=b.filter(t=>t.employee_id.toLowerCase().includes(m.toLowerCase())||t.employee_name.toLowerCase().includes(m.toLowerCase())||t.checkup_date.toLowerCase().includes(m.toLowerCase())),j=c>0?Math.max(0,(1+c)*d-g.length):0,L=X(g,V(i,s)).slice(c*d,c*d+d);return e.jsx(h,{sx:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:e.jsxs(A,{sx:{width:"100%",mb:2,padding:5},children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[e.jsx(B,{variant:"h6",id:"tableTitle",component:"div",children:"Medical Checkup Report"}),e.jsxs(h,{children:[e.jsx(z,{variant:"outlined",size:"small",placeholder:"Search...",value:m,onChange:E,sx:{marginRight:2}}),e.jsx(F,{title:"Download PDF",children:e.jsx(I,{onClick:D,children:e.jsx(H,{})})})]})]}),e.jsx(J,{children:e.jsxs(U,{sx:{minWidth:730},"aria-labelledby":"tableTitle",children:[e.jsx(S,{order:i,orderBy:s,onRequestSort:w}),e.jsxs(W,{children:[L.map(t=>e.jsxs(y,{hover:!0,sx:{cursor:"pointer"},children:[e.jsx(p,{component:"th",scope:"row",padding:"none",children:t.slno}),e.jsx(p,{align:"right",children:t.employee_id}),e.jsx(p,{align:"right",children:t.employee_name}),e.jsx(p,{align:"right",children:t.checkup_date})]},t.id)),j>0&&e.jsx(y,{style:{height:53*j},children:e.jsx(p,{colSpan:5})})]})]})}),e.jsx(M,{rowsPerPageOptions:[5,10,25],component:"div",count:g.length,rowsPerPage:d,page:c,onPageChange:v,onRowsPerPageChange:k})]})})}export{le as default};
